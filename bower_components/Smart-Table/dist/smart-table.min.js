!function(ng){"use strict";ng.module("smart-table",[])}(angular),function(ng){"use strict";ng.module("smart-table").directive("stSearch",function(){return{replace:!0,require:"^stTable",link:function(scope,element,attr,ctrl){var tableCtrl=ctrl,predicate=attr.stSearch||"";element.bind("input",function(evt){evt=evt.originalEvent||evt,scope.$apply(function(){tableCtrl.search(evt.target.value,predicate)})})}}})}(angular),function(ng){"use strict";ng.module("smart-table").directive("stSelectRow",function(){return{restrict:"A",require:"^stTable",scope:{row:"=stSelectRow"},link:function(scope,element,attr,ctrl){var mode=attr.stSelectMode||"single";element.bind("click",function(){scope.$apply(function(){ctrl.select(scope.row,mode)})}),scope.$watch("row.isSelected",function(newValue){newValue===!0?element.addClass("st-selected"):element.removeClass("st-selected")})}}})}(angular),function(ng){"use strict";ng.module("smart-table").directive("stSort",["$parse",function($parse){return{restrict:"A",require:"^stTable",link:function(scope,element,attr,ctrl){function reset(){index=0,element.removeClass("st-sort-ascent").removeClass("st-sort-descent")}var predicate=attr.stSort,getter=$parse(predicate),index=0,states=["descent","ascent","natural"];ng.isFunction(getter(scope))&&(predicate=getter(scope)),element.bind("click",function(){predicate&&scope.$apply(function(){index++;var stateIndex=index%2;index%3===0?ctrl.reset():(ctrl.sortBy(predicate,0===stateIndex),element.removeClass("st-sort-"+states[(stateIndex+1)%2]).addClass("st-sort-"+states[stateIndex]))})}),scope.$on("st:sort",function(event,args){args.predicate!==predicate&&reset()}),scope.$on("st:reset",reset)}}}])}(angular),function(ng){"use strict";ng.module("smart-table").controller("stTableController",["$scope","$parse","$filter","$attrs",function($scope,$parse,$filter,$attrs){var propertyName=$attrs.stTable,getter=$parse(propertyName),setter=getter.assign,orderBy=$filter("orderBy"),filter=$filter("filter"),safeCopy=ng.copy(getter($scope)),tableState={sort:{},search:{}};this.sortBy=function(predicate,reverse){tableState.sort.predicate=predicate,tableState.sort.reverse=reverse===!0,this.pipe(),$scope.$broadcast("st:sort",{predicate:predicate})},this.search=function(input,predicate){var predicateObject={},prop=predicate?predicate:"$";predicateObject[prop]=input,tableState.search.predicateObject=predicateObject,this.pipe()},this.pipe=function(){var filtered=tableState.search.predicateObject?filter(safeCopy,tableState.search.predicateObject):safeCopy;setter($scope,orderBy(filtered,tableState.sort.predicate,tableState.sort.reverse))},this.select=function(row,mode){var rows=getter($scope),index=rows.indexOf(row);-1!==index&&("single"===mode?ng.forEach(getter($scope),function(value,key){value.isSelected=key===index?!value.isSelected:!1}):rows[index].isSelected=!rows[index].isSelected)},this.reset=function(){tableState.sort={},this.pipe(),$scope.$broadcast("st:reset")}}]).directive("stTable",function(){return{restrict:"A",controller:"stTableController",link:function(){}}})}(angular);